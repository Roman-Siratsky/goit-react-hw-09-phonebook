(this["webpackJsonpgoit-react-hw-07-phonebook"]=this["webpackJsonpgoit-react-hw-07-phonebook"]||[]).push([[0],{133:function(e,t,n){},138:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(12),o=n.n(r),i=n(8),s=n(24),u=n(82),j=n(19),b=n(20),l=n.n(b),d=n(63),O=n.n(d),h=n(7),f=Object(h.b)("phoneBook/fetchContactsRequest"),p=Object(h.b)("phoneBook/fetchContactsSuccess"),m=Object(h.b)("phoneBook/fetchContactsError"),v=Object(h.b)("phoneBook/addContactRequest"),x=Object(h.b)("phoneBook/addContactSuccess"),g=Object(h.b)("phoneBook/addContactError"),k=Object(h.b)("phoneBook/deleteContactRequest"),y=Object(h.b)("phoneBook/deleteContactSuccess"),C=Object(h.b)("phoneBook/deleteContactError"),w=Object(h.b)("phoneBook/editContactRequest"),N=Object(h.b)("phoneBook/editContactSuccess"),B=Object(h.b)("phoneBook/editContactError"),S=Object(h.b)("phoneBook/filter");Object(h.b)("phoneBook/alert");l.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com/";var L=function(){return function(e){e(f()),l.a.get("/contacts").then((function(t){var n=t.data;return e(p(n))})).catch((function(t){return e(m(t))}))}},E=n(52),T=function(e){return e.phoneBook.contacts},R=function(e){return e.phoneBook.filter},q=Object(E.a)([T,R],(function(e,t){var n=t.toLowerCase();return e.filter((function(e){return e.name.toLowerCase().includes(n)}))})),D=n(178),z=n(179),I=n(2);function W(){var e=Object(i.b)(),t=Object(i.c)(T),n=Object(c.useState)(""),a=Object(j.a)(n,2),r=a[0],o=a[1],s=Object(c.useState)("+38"),u=Object(j.a)(s,2),b=u[0],d=u[1],O=function(e){var n=e.toLowerCase();return t.some((function(e){return e.name.toLowerCase()===n}))}(r);return Object(I.jsxs)("form",{className:"main-form",children:[Object(I.jsx)("div",{children:Object(I.jsx)(D.a,{name:"name",label:"Name",variant:"outlined",value:r,type:"text",onChange:function(e){o(e.currentTarget.value)}})}),Object(I.jsx)("div",{children:Object(I.jsx)(D.a,{label:"Number",name:"number",variant:"outlined",type:"tel",value:b,onChange:function(e){d(e.currentTarget.value)}})}),Object(I.jsx)("div",{children:Object(I.jsx)(z.a,{variant:"contained",color:"primary",type:"submit",disabled:!r.length||13!==b.length||!Number(b),onClick:O?function(e){e.preventDefault(),o(""),d(""),alert(r+" \u0443\u0436\u0435 \u0435\u0441\u0442\u044c \u0432 \u0441\u043f\u0438\u0441\u043a\u0435 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043e\u0432")}:function(t){t.preventDefault(),e(function(e,t){return function(n){var c={name:e,number:t};n(v()),l.a.post("/contacts",c).then((function(e){var t=e.data;return n(x(t))})).catch((function(e){return n(g(e))}))}}(r,b)),o(""),d("")},children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})})]})}var M=n(169),U=Object(M.a)((function(e){return{textField:{width:"100%",padding:"5px"}}})),F=function(){var e=Object(i.c)(R),t=Object(i.b)(),n=U();return Object(I.jsx)(D.a,{className:n.textField,name:"filter",type:"text",placeholder:"Search contacts",value:e,variant:"outlined",autoComplete:"off",onChange:function(e){return t(S(e.currentTarget.value))}})},P=n(173),A=n(170),J=n(171),_=n(172),H=n(174),G=n(87),K=n.n(G),Q=document.getElementById("modal"),V=function(e){Object(c.useEffect)((function(){return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[]);var t=function(t){"Escape"===t.code&&e.toggleModal()};return Object(r.createPortal)(Object(I.jsx)("div",{onClick:function(t){t.currentTarget===t.target&&e.toggleModal()},className:"overlay",children:Object(I.jsx)("div",{className:"modal",children:e.children})}),Q)},X=function(e){var t=Object(i.b)(),n=Object(i.c)(T),a=Object(c.useState)(""),r=Object(j.a)(a,2),o=r[0],s=r[1],u=Object(c.useState)("+38"),b=Object(j.a)(u,2),d=b[0],O=b[1];return Object(I.jsxs)("form",{className:"edit-form",children:[Object(I.jsx)("div",{children:Object(I.jsx)(D.a,{name:"name",label:"Name",variant:"outlined",value:o,type:"text",onChange:function(e){s(e.currentTarget.value)}})}),Object(I.jsx)("div",{children:Object(I.jsx)(D.a,{label:"Number",name:"number",variant:"outlined",type:"tel",value:d,onChange:function(e){O(e.currentTarget.value)}})}),Object(I.jsx)("div",{children:Object(I.jsx)(z.a,{variant:"contained",color:"primary",type:"submit",disabled:!o.length||13!==d.length||!Number(d),onClick:function(e){var t=e.toLowerCase();return n.some((function(e){return e.name.toLowerCase()===t}))}(o)?function(e){e.preventDefault(),s(""),O(""),alert(o+" \u0443\u0436\u0435 \u0435\u0441\u0442\u044c \u0432 \u0441\u043f\u0438\u0441\u043a\u0435 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043e\u0432")}:function(n){var c,a;n.preventDefault(),t((c=e.contactId,a={name:o,number:d},function(e){e(w()),l.a.patch("/contacts/"+c,a).then((function(){return e(N(c,a))})).catch((function(t){return e(B(t))}))})),s(""),O(""),e.toggleModal(),t(L())},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"})})]})},Y=Object(M.a)((function(e){return{card:{display:"flex",justifyContent:"space-between",alignItems:"center",paddingLeft:"10px",paddingRight:"10px"}}})),Z=function(e){var t,n=e.contact,a=(e.index,Object(i.b)()),r=Y(),o=Object(c.useState)(!1),s=Object(j.a)(o,2),u=s[0],b=s[1],d=Object(c.useState)(null),O=Object(j.a)(d,2),h=O[0],f=O[1],p=function(e){b(!u),f(e)};return Object(I.jsx)("li",{className:"contact-item",children:Object(I.jsxs)(A.a,{className:r.card,children:[Object(I.jsx)(J.a,{children:Object(I.jsx)(K.a,{})}),Object(I.jsx)(_.a,{children:Object(I.jsx)(P.a,{align:"center",variant:"h6",children:n.name.toUpperCase()+" : "+(t=n.number,t.split("").map((function(e,t){return 3===t?"(".concat(e):6===t?")".concat(e):e})).join(""))})}),Object(I.jsxs)(H.a,{children:[Object(I.jsx)(z.a,{variant:"contained",color:"primary",type:"button",onClick:function(){return a((e=n.id,function(t){t(k()),l.a.delete("/contacts/"+e).then((function(){return t(y(e))})).catch((function(e){return t(C(e))}))}));var e},children:"Delete"}),Object(I.jsx)(z.a,{variant:"contained",color:"primary",type:"button",onClick:function(){return p(n.id)},children:"Edit"}),u&&Object(I.jsx)(V,{toggleModal:p,children:Object(I.jsx)(X,{toggleModal:p,contactId:h})})]})]})},n.id)};function $(){var e=Object(i.b)(),t=Object(i.c)(q);return Object(c.useEffect)((function(){e(L())}),[e]),t.length?t.map((function(e,t){return Object(I.jsx)(Z,{contact:e,index:t},e.id)})):Object(I.jsx)("li",{className:"no_contacts",children:Object(I.jsx)(P.a,{align:"center",variant:"h3",children:"No saved contacts yet"})},O.a.generate())}var ee=function(){return Object(I.jsxs)("div",{className:"container",children:[Object(I.jsx)("div",{children:Object(I.jsx)(W,{})}),Object(I.jsxs)("div",{className:"contacts",children:[Object(I.jsx)(P.a,{align:"center",variant:"h6",children:"Contacts"}),Object(I.jsx)(F,{}),Object(I.jsx)("ul",{children:Object(I.jsx)($,{})})]})]})},te=(n(133),n(176)),ne=n(177),ce=n(175),ae=n(88),re=n.n(ae),oe=n(31),ie=n.n(oe),se=n(49),ue=Object(h.b)("auth/registerRequest"),je=Object(h.b)("auth/registerSuccess"),be=Object(h.b)("auth/registerError"),le=Object(h.b)("auth/loginRequest"),de=Object(h.b)("auth/loginSuccess"),Oe=Object(h.b)("auth/loginError"),he=Object(h.b)("auth/logOutRequest"),fe=Object(h.b)("auth/logOutSuccess"),pe=Object(h.b)("auth/logOutError"),me=Object(h.b)("auth/getCurrentUserRequest"),ve=Object(h.b)("auth/getCurrentUserSuccess"),xe=Object(h.b)("auth/getCurrentUserError");l.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com/";var ge,ke,ye,Ce,we,Ne,Be=function(e){l.a.defaults.headers.common.Authorization="Bearer ".concat(e)},Se=function(){l.a.defaults.headers.common.Authorization=""},Le=function(e){var t=Object(i.b)();return Object(I.jsxs)(ce.a,{children:[Object(I.jsxs)(P.a,{variant:"h6",color:"inherit",noWrap:!0,children:["Welcome, ",e.userName]}),Object(I.jsx)(s.b,{className:"navLink",to:"/login",children:Object(I.jsx)(z.a,{variant:"contained",color:"primary",noWrap:!0,type:"button",onClick:function(){return t(function(){var e=Object(se.a)(ie.a.mark((function e(t){return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(he()),e.prev=1,e.next=4,l.a.post("users/logout");case 4:Se(),t(fe()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(pe(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())},children:"Logout"})})]})},Ee=function(e){return e.authorization.isLoggedIn},Te=function(e){return e.authorization.user.name},Re=function(){return Object(I.jsxs)(ce.a,{children:[Object(I.jsx)(s.b,{className:"navLink",to:"/register",children:Object(I.jsx)(P.a,{variant:"h6",color:"inherit",noWrap:!0,children:"Register"})}),Object(I.jsx)(s.b,{className:"navLink",to:"/login",children:Object(I.jsx)(P.a,{variant:"h6",color:"inherit",noWrap:!0,children:"Login"})})]})},qe=Object(M.a)((function(e){return{appBar:{display:"flex",justifyContent:"space-between",flexDirection:"row"}}})),De=function(){var e=Object(i.c)(Ee),t=Object(i.c)(Te),n=qe();return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(te.a,{}),Object(I.jsxs)(ne.a,{className:n.appBar,position:"relative",children:[Object(I.jsxs)(ce.a,{children:[Object(I.jsx)(re.a,{}),Object(I.jsx)(s.b,{className:"navLink",to:"/",children:Object(I.jsx)(P.a,{variant:"h6",color:"inherit",noWrap:!0,children:"Home"})}),e&&Object(I.jsx)(s.b,{className:"navLink",to:"/contacts",children:Object(I.jsx)(P.a,{variant:"h6",color:"inherit",noWrap:!0,children:"PhoneBook"})})]}),e?Object(I.jsx)(Le,{userName:t}):Object(I.jsx)(Re,{})]})]})},ze=n(14),Ie=function(e){var t=Object(i.b)(),n=Object(c.useState)(""),a=Object(j.a)(n,2),r=a[0],o=a[1],s=Object(c.useState)(""),u=Object(j.a)(s,2),b=u[0],d=u[1],O=Object(c.useState)(""),h=Object(j.a)(O,2),f=h[0],p=h[1];return Object(I.jsx)("div",{className:"register-container",children:Object(I.jsxs)("form",{className:"register-form",children:[Object(I.jsx)("div",{className:"register-item",children:Object(I.jsx)(D.a,{name:"name",label:"Name",variant:"outlined",value:r,type:"text",onChange:function(e){var t=e.currentTarget.value;o(t)}})}),Object(I.jsx)("div",{className:"register-item",children:Object(I.jsx)(D.a,{label:"Email",name:"email",variant:"outlined",type:"email",value:b,onChange:function(e){var t=e.currentTarget.value;d(t)},autoComplete:"off"})}),Object(I.jsx)("div",{className:"register-item",children:Object(I.jsx)(D.a,{label:"Password",name:"password",variant:"outlined",type:"password",value:f,onChange:function(e){var t=e.currentTarget.value;p(t)},autoComplete:"off"})}),Object(I.jsx)("div",{className:"register-item",children:Object(I.jsx)(z.a,{variant:"contained",color:"primary",type:"submit",onClick:function(e){var n;e.preventDefault(),t((n={name:r,email:b,password:f},function(){var e=Object(se.a)(ie.a.mark((function e(t){var c,a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(ue()),e.prev=1,e.next=4,l.a.post("users/signup",n);case 4:c=e.sent,a=c.data,Be(a.token),t(je(a)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t(be(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}())),o(""),d(""),p("")},children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]})})},We=function(e){var t=Object(i.b)(),n=Object(c.useState)(""),a=Object(j.a)(n,2),r=a[0],o=a[1],s=Object(c.useState)(""),u=Object(j.a)(s,2),b=u[0],d=u[1];return Object(I.jsx)("div",{className:"register-container",children:Object(I.jsxs)("form",{className:"register-form",children:[Object(I.jsx)("div",{className:"register-item",children:Object(I.jsx)(D.a,{label:"Email",name:"email",variant:"outlined",type:"email",value:r,onChange:function(e){var t=e.currentTarget.value;o(t)}})}),Object(I.jsx)("div",{className:"register-item",children:Object(I.jsx)(D.a,{label:"Password",name:"password",variant:"outlined",type:"password",value:b,onChange:function(e){var t=e.currentTarget.value;d(t)}})}),Object(I.jsx)("div",{className:"register-item",children:Object(I.jsx)(z.a,{variant:"contained",color:"primary",type:"submit",onClick:function(e){var n;e.preventDefault(),t((n={email:r,password:b},function(){var e=Object(se.a)(ie.a.mark((function e(t){var c,a;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(le()),e.prev=1,e.next=4,l.a.post("users/login",n);case 4:c=e.sent,a=c.data,Be(a.token),t(de(a)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t(Oe(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}())),o(""),d("")},children:"\u0412\u043e\u0439\u0442\u0438"})})]})})},Me=n(34),Ue=n(60),Fe=function(e){var t=e.component,n=e.redirectTo,c=Object(Ue.a)(e,["component","redirectTo"]),a=Object(i.c)(Ee);return Object(I.jsx)(ze.b,Object(Me.a)(Object(Me.a)({},c),{},{render:function(e){return a&&c.restricted?Object(I.jsx)(ze.a,{to:n}):Object(I.jsx)(t,Object(Me.a)({},e))}}))},Pe=function(e){var t=e.component,n=e.redirectTo,c=Object(Ue.a)(e,["component","redirectTo"]),a=Object(i.c)(Ee);return Object(I.jsx)(ze.b,Object(Me.a)(Object(Me.a)({},c),{},{render:function(e){return a?Object(I.jsx)(t,Object(Me.a)({},e)):Object(I.jsx)(ze.a,{to:n})}}))},Ae=function(){return Object(I.jsx)("div",{className:"home-container",children:Object(I.jsx)(P.a,{align:"center",variant:"h1",children:"Contacts Servise"})})},Je=function(){var e=Object(i.b)();return Object(c.useEffect)((function(){e(function(){var e=Object(se.a)(ie.a.mark((function e(t,n){var c,a,r,o;return ie.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n(),a=c.authorization.token){e.next=3;break}return e.abrupt("return");case 3:return Be(a),t(me()),e.prev=5,e.next=8,l.a.get("users/current");case 8:r=e.sent,o=r.data,t(ve(o)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),t(xe(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}())}),[]),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(De,{}),Object(I.jsx)("div",{className:"whole_app",children:Object(I.jsxs)(ze.d,{children:[Object(I.jsx)(Fe,{exact:!0,path:"/",component:Ae}),Object(I.jsx)(Pe,{path:"/contacts",component:ee,redirectTo:"/login"}),Object(I.jsx)(Fe,{path:"/register",component:Ie,restricted:!0,redirectTo:"/contacts"}),Object(I.jsx)(Fe,{path:"/login",component:We,restricted:!0,redirectTo:"contacts"})]})})]})},_e=n(59),He=n(18),Ge=n(10),Ke=Object(h.c)([],(ge={},Object(Ge.a)(ge,p,(function(e,t){return t.payload})),Object(Ge.a)(ge,x,(function(e,t){return[].concat(Object(_e.a)(e),[t.payload])})),Object(Ge.a)(ge,y,(function(e,t){return e.filter((function(e){return e.id!==t.payload}))})),ge)),Qe=Object(h.c)("",Object(Ge.a)({},S,(function(e,t){return t.payload}))),Ve=Object(h.c)(!1,(ke={},Object(Ge.a)(ke,v,(function(){return!0})),Object(Ge.a)(ke,x,(function(){return!1})),Object(Ge.a)(ke,g,(function(){return!1})),Object(Ge.a)(ke,k,(function(){return!0})),Object(Ge.a)(ke,y,(function(){return!1})),Object(Ge.a)(ke,C,(function(){return!1})),ke)),Xe=Object(He.c)({contacts:Ke,filter:Qe,loading:Ve}),Ye=n(89),Ze=n.n(Ye),$e={name:null,email:null},et=Object(h.c)($e,(ye={},Object(Ge.a)(ye,je,(function(e,t){return t.payload.user})),Object(Ge.a)(ye,de,(function(e,t){return t.payload.user})),Object(Ge.a)(ye,fe,(function(){return $e})),Object(Ge.a)(ye,ve,(function(e,t){return t.payload})),ye)),tt=Object(h.c)(null,(Ce={},Object(Ge.a)(Ce,je,(function(e,t){return t.payload.token})),Object(Ge.a)(Ce,de,(function(e,t){return t.payload.token})),Object(Ge.a)(Ce,fe,(function(e,t){return null})),Ce)),nt=Object(h.c)(null,(we={},Object(Ge.a)(we,be,(function(e,t){return t.payload})),Object(Ge.a)(we,Oe,(function(e,t){return t.payload})),Object(Ge.a)(we,pe,(function(e,t){return t.payload})),Object(Ge.a)(we,xe,(function(e,t){return t.payload})),we)),ct=Object(h.c)(!1,(Ne={},Object(Ge.a)(Ne,je,(function(){return!0})),Object(Ge.a)(Ne,de,(function(){return!0})),Object(Ge.a)(Ne,ve,(function(){return!0})),Object(Ge.a)(Ne,fe,(function(){return!1})),Ne)),at=Object(He.c)({user:et,token:tt,isLoggedIn:ct,error:nt}),rt=n(90),ot=n.n(rt),it=n(32),st={key:"token",storage:ot.a,whitelist:["token"]},ut=Object(He.c)({phoneBook:Xe,authorization:Object(it.g)(st,at)}),jt=[].concat(Object(_e.a)(Object(h.d)({serializableCheck:{ignoredActions:[it.a,it.f,it.b,it.c,it.d,it.e]}})),[Ze.a]),bt=Object(h.a)({reducer:ut,middleware:jt,devTools:!1}),lt={store:bt,persistor:Object(it.h)(bt)};o.a.render(Object(I.jsx)(a.a.StrictMode,{children:Object(I.jsx)(i.a,{store:lt.store,children:Object(I.jsx)(u.a,{loading:"Loading",persistor:lt.persistor,children:Object(I.jsx)(s.a,{children:Object(I.jsx)(Je,{})})})})}),document.getElementById("root"))}},[[138,1,2]]]);
//# sourceMappingURL=main.fea4839a.chunk.js.map